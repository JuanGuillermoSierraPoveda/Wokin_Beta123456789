<MapScreen>:
    BoxLayout:
        orientation: "vertical"
        FloatLayout:
            Image:
                pos_hint:{'center_y':0.5}
                source: "imgmap/base.png"
                halign: 'center'
                valign: 'middle'
                fit_mode: 'fill'
                allow_stretch: True
                keep_ratio: True

            Button:
                text: "q0"
                color: 0,0,0,1
                pos_hint: {'center_x': 0.82, 'center_y': 0.12}
                background_normal: "icons/estbase.png"
                size: 80, 80
                size_hint: None, None
            Button:
                text: "q1"
                color: 0,0,0,1
                pos_hint: {'center_x': 0.93, 'center_y': 0.31}
                background_normal: "icons/estbase.png"
                size: 80, 80
                size_hint: None, None

            Button:
                text: "q3"
                color: 0,0,0,1
                pos_hint: {'center_x': 0.57, 'center_y': 0.85}
                background_normal: "icons/estbase.png"
                size: 80, 80
                size_hint: None, None

            Button:
                text: "q2"
                color: 0,0,0,1
                pos_hint: {'center_x': 0.23, 'center_y': 0.74}
                background_normal: "icons/estbase.png"
                size: 80, 80
                size_hint: None, None

            Button:
                text: "q4"
                color: 0,0,0,1
                pos_hint: {'center_x': 0.05, 'center_y': 0.9}
                background_normal: "icons/estbase.png"
                size: 80, 80
                size_hint: None, None

        GridLayout:
            size_hint_y: None
            height: 70
            cols: 4
            canvas.before:
                Color:
                    rgba: 165/255, 214/255, 167/255, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("home")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/home1.png" if root.current_screen == "home" else "icons/home.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("search")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/search1.png" if root.current_screen == "search" else "icons/search.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("perfil")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/account1.png" if root.current_screen == "perfil" else "icons/account.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
        
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("settings")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/settings1.png" if root.current_screen == "settings" else "icons/settings.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True