<SettingsScreen>:
    name: "settings" # Asegúrate de que el 'name' coincida con lo que usas en el ScreenManager
    BoxLayout:
        orientation: "vertical"
        
        # ----------------------------------------------------
        # A. BARRA SUPERIOR (Top Bar) - "Configuraciones"
        # ----------------------------------------------------
        BoxLayout:
            size_hint_y: None
            height: 60
            padding: 10, 0
            canvas.before:
                Color:
                    rgba: (27/255, 94/255, 31/255, 1) # Color de fondo verde oscuro
                Rectangle:
                    pos: self.pos
                    size: self.size

            # Botón "Cerrar" (X)
            Button:
                text: "  " # O puedes usar un icono de imagen si tienes uno
                font_size: '25sp'
                color: 1, 1, 1, 1 # Texto blanco
                background_normal: ""
                background_color: 0, 0, 0, 0
                size_hint_x: None
                width: 50
                on_press: app.root.current = "home" # Vuelve a la pantalla principal

            # Título de la pantalla
            Label:
                text: "Configuraciones"
                color: 1, 1, 1, 1 # Texto blanco
                font_size: '20sp'
                halign: 'left'
                valign: 'middle'
                text_size: self.size # Para que halign funcione
        
        # ----------------------------------------------------
        # B. MENÚ DE OPCIONES (ScrollView para la lista)
        # ----------------------------------------------------
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: 0, 10, 0, 0 # Padding superior

                # --- Opción 1: Información personal ---
                Button:
                    size_hint_y: None
                    height: 55
                    background_normal: ""
                    background_color: 0, 0, 0, 0
                    padding: 15, 0
                    on_press: root.cambiar_contenido("informacion_personal")

                    BoxLayout:
                        orientation: "horizontal"
                        pos: self.parent.pos
                        size: self.parent.size

                        Label:
                            text: "    Información personal"
                            color: 0, 0, 0, 1
                            font_size: '18sp'
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size
                        
                Widget: # Línea divisoria
                    size_hint_y: None
                    height: 1
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                # --- Opción 2: Pásate a premium ---
                Button:
                    size_hint_y: None
                    height: 55
                    background_normal: ""
                    background_color: 0, 0, 0, 0
                    padding: 15, 0
                    on_press: print("Pásate a premium")
                    
                    BoxLayout:
                        orientation: "horizontal"
                        pos: self.parent.pos
                        size: self.parent.size

                        Label:
                            text: "    Pásate a premium"
                            color: 0, 0, 0, 1
                            font_size: '18sp'
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size
                        
                Widget: # Línea divisoria
                    size_hint_y: None
                    height: 1
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                
                # --- Opción 3: Idioma ---
                Button:
                    size_hint_y: None
                    height: 55
                    background_normal: ""
                    background_color: 0, 0, 0, 0
                    padding: 15, 0
                    on_press: print("Idioma")
                    
                    BoxLayout:
                        orientation: "horizontal"
                        pos: self.parent.pos
                        size: self.parent.size

                        Label:
                            text: "    Idioma"
                            color: 0, 0, 0, 1
                            font_size: '18sp'
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size
                        
                Widget: # Línea divisoria
                    size_hint_y: None
                    height: 1
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                # --- Opción 4: Centro de ayuda ---
                Button:
                    size_hint_y: None
                    height: 55
                    background_normal: ""
                    background_color: 0, 0, 0, 0
                    padding: 15, 0
                    on_press: print("Centro de ayuda")
                    
                    BoxLayout:
                        orientation: "horizontal"
                        pos: self.parent.pos
                        size: self.parent.size

                        Label:
                            text: "    Centro de ayuda"
                            color: 0, 0, 0, 1
                            font_size: '18sp'
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size
                        
                Widget: # Línea divisoria
                    size_hint_y: None
                    height: 1
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                
                # --- Opción 5: Condiciones de uso ---
                Button:
                    size_hint_y: None
                    height: 55
                    background_normal: ""
                    background_color: 0, 0, 0, 0
                    padding: 15, 0
                    on_press: print("Condiciones de uso")
                    
                    BoxLayout:
                        orientation: "horizontal"
                        pos: self.parent.pos
                        size: self.parent.size

                        Label:
                            text: "    Condiciones de uso"
                            color: 0, 0, 0, 1
                            font_size: '18sp'
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size
                Widget: # Línea divisoria (opcional, para el final)
                    size_hint_y: None
                    height: 1
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

        GridLayout:
            size_hint_y: None
            height: 70
            cols: 4
            canvas.before:
                Color:
                    rgba: 165/255, 214/255, 167/255, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("home")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/home1.png" if root.current_screen == "home" else "icons/home.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("search")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/search1.png" if root.current_screen == "search" else "icons/search.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("perfil")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/account1.png" if root.current_screen == "perfil" else "icons/account.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
        
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("settings")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/settings1.png" if root.current_screen == "settings" else "icons/settings.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True