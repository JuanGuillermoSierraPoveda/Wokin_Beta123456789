<FavoritesScreen>:
    BoxLayout:
        orientation: "vertical"
        
        # ----------------------------------------------------
        # A. BARRA SUPERIOR (igual que en Home)
        # ----------------------------------------------------
        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 10
            padding: 10, 5
            canvas.before:
                Color:
                    rgba: (27/255, 94/255, 31/255, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                size_hint_x: 0.75
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [20,]
                
                TextInput:
                    id: search_input
                    size_hint_x: 1
                    hint_text: "Buscar"
                    multiline: False
                    background_color: 0, 0, 0, 0
                    foreground_color: 0, 0, 0, 1
                    cursor_color: 0, 0, 0, 1
                    padding: [dp(20), (self.height - self.font_size) / 2 - dp(5), 0, 0] # Usar dp()
                    font_size: '15sp'

            Button:
                id: filter_button
                text: ""
                size_hint_x: 0.25
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 1, 1, 1, 1
                halign: 'center'
                valign: 'middle'
                text_size: self.width - dp(30), self.height
                font_size: '15sp'
                
                BoxLayout:
                    orientation: "horizontal"
                    spacing: 5
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 5, 0
                    
                    Image:
                        source: "icons/filter.png"
                        size_hint_x: None
                        width: dp(25)
                        allow_stretch: True
                        keep_ratio: True
                        pos_hint: {'center_y': 0.5}
                    
                    Label:
                        text: "Filtrar"
                        color: 1, 1, 1, 1
                        font_size: '15sp'
                        size_hint_x: None
                        width: self.texture_size[0] + dp(5)
                        pos_hint: {'center_y': 0.5}

        # ----------------------------------------------------
        # B. CONTENIDO SCROLLEABLE (Se llenarÃ¡ desde Python)
        # ----------------------------------------------------
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                id: contenido_scroll # ðŸš¨ MantÃ©n este ID, lo usamos en Python
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: 0 # ðŸš¨ Ajustado a 0 para que los separadores sean la Ãºnica separaciÃ³n
                padding: dp(10) # ðŸš¨ Agrega un padding general al ScrollView
                # ðŸš¨ Eliminados los botones fijos. Se aÃ±adirÃ¡n en Python.

        # ----------------------------------------------------
        # C. BARRA INFERIOR DE NAVEGACIÃ“N
        # ----------------------------------------------------
        GridLayout:
            size_hint_y: None
            height: 70
            cols: 4
            canvas.before:
                Color:
                    rgba: 165/255, 214/255, 167/255, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("home")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/home1.png" if root.current_screen == "home" else "icons/home.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("search")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/search1.png" if root.current_screen == "search" else "icons/search.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
            
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("perfil")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/account1.png" if root.current_screen == "favorites" else "icons/account.png" 
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True
        
            Button:
                background_normal: ""
                background_color: 0, 0, 0, 0
                color: 0, 0, 0, 1
                halign: 'center'
                valign: 'bottom'
                text_size: self.width, self.height
                on_press: root.cambiar_contenido("settings")
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    padding: 0, 5, 0, 20
                    pos: self.parent.pos
                    size: self.parent.size
                    Image:
                        source: "icons/settings1.png" if root.current_screen == "settings" else "icons/settings.png"
                        size_hint_y: 0.4
                        allow_stretch: True
                        keep_ratio: True